{"remainingRequest":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/src/components/MainPage.vue?vue&type=style&index=0&id=109177d0&scoped=true&lang=css&","dependencies":[{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/src/components/MainPage.vue","mtime":1602601304812},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpkaXYgewogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0K"},{"version":3,"sources":["MainPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0QA;AACA;AACA","file":"MainPage.vue","sourceRoot":"src/components","sourcesContent":["\n<template>\n  <div>\n    \n    <link rel=\"stylesheet\" href=\"https://www.w3schools.com/w3css/4/w3.css\" />\n    <link\n      rel=\"stylesheet\"\n      href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"\n    />\n\n    <!-- <div v-if=\"restaurants.length\">\n            <ol>\n                <li v-for=\"(restaurant, index) in restaurants\" :key=\"index\">\n                    {{restaurant.restaurantName}} - {{restaurant.restaurantCuisine}} - {{restaurant.restaurantPrice}}<button @click=\"removeResto(restaurant)\" style=\"background-color: red\">Remove</button>\n                </li>\n            </ol>\n\n\n        </div>\n        <div v-else>\n            <p>Hooray! No rastaurant in list sorry.</p>\n        </div>  -->\n\n    <div class=\"w3-bar w3-light-grey\">\n      <a href=\"http://localhost:8081\" class=\"w3-bar-item w3-button\">Home</a>\n      <a href=\"#\" class=\"w3-bar-item w3-button\">Login</a>\n      <a class=\"w3-bar-item \" >Nombre de restaurants : {{ total }}</a>\n      <button class=\" fa fa-search w3-bar-item w3-button w3-green w3-right \" type=\"submit\" @click=\"getRestaurantsFromServer(0)\">\n      </button>\n\n          <input\n        class=\"w3-bar-item w3-input w3-right\"\n        type=\"text\"\n        placeholder=\"Search..\"\n        name=\"searchVal\"\n        id=\"searchVal\"\n        @keydown=\"searchBar()\"\n          />\n      \n    </div>\n\n    <datalist id=\"values\">\n      <option value=\"5\"/>\n      <option value=\"10\"/>\n      <option value=\"20\"/>\n      <option value=\"50\"/>\n      <option value=\"100\"/>\n    </datalist>\n\n    <div class=\"slidecontainer w3-right w3-margin-right\">\n      <input\n        type=\"range\"\n        min=\"5\"\n        max=\"100\"\n        step=\"5\"\n        list=\"values\"\n        id=\"myRange\"\n        placeholder=\"Restaurants par page\"\n        v-on:change=\"updateSliderValue()\"\n      />\n      <p style=\"text-align:center; margin:0px ; padding: 0px;\">{{ sliderVal }}</p> \n    </div>\n\n    <div id=\"table-restos\" style=\" margin-left: 2%; margin-right:2%; margin-top: 0px; padding: 0px;\">\n    <table class=\"w3-table w3-bordered\" style=\"table-layout: fixed; width:100% ; margin: 0px\">\n      <tr class=\"w3-green\">\n        <th style=\"width:80px\"> details </th>\n        <th>Nom</th>\n        <th>Cuisine</th>\n        <th>ville</th>\n      </tr>\n      <tbody>\n        <restaurant-list :restos=\"restaurants\">\n          <!-- <slot><restaurant :varia=\"restaurant\"></restaurant></slot> -->\n        </restaurant-list>\n      </tbody>\n    </table>\n    <h3 v-if=\"restaurants.length==0\" class=\"w3-red w3-center\"> 0 restaurants trouv√©s </h3>\n\n    </div>\n    <br />\n\n    <div class=\"w3-container\" style=\"margin: auto\">\n      <div class=\"w3-quarter\">\n        <button\n          class=\"w3-button w3-left w3-red\"\n          v-on:click=\"previousPage()\"\n          value=\"precedent\"\n          :disabled=\"counter == 0\"\n        >\n          precedent\n        </button>\n      </div>\n\n      <div class=\"w3-half\">\n        <h4 class=\"w3-text w3-center\">page number {{ counter }}</h4>\n      </div>\n\n      <div class=\"w3-quarter\">\n        <button\n          class=\"w3-button w3-right w3-green\"\n          v-on:click=\"nextPage()\"\n          value=\"suivant\"\n        >\n          suivant\n        </button>\n      </div>\n    </div>\n\n    <hr />\n    <!-- <p>New restaurant:</p>\n    <form v-on:submit.prevent>\n      <div>\n        <input type=\"text\" v-model=\"name\" placeholder=\"restaurant Name\" />\n      </div>\n      <div>\n        <input type=\"text\" v-model=\"cuisine\" placeholder=\"restaurant Cuisine\" />\n      </div>\n      <div>\n        <input type=\"text\" v-model=\"restaurantPrice\" placeholder=\"Prix moyen\" />\n      </div>\n      <div>\n        <button @click=\"addResto()\">Submit</button>\n      </div>\n    </form> -->\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue/dist/vue.js\";\nimport Fragment from \"vue-fragment\";\nVue.use(Fragment.Plugin);\n\n// import {data} from '../main.js'\nimport _ from \"lodash\";\nexport default {\n  name: \"MainPage\",\n  data: () => ({\n    name: \"\",\n    _id: \"\",\n    cuisine: \"\",\n    borough : \"\",\n    restaurantPrice: \"\",\n    restaurants: [],\n    counter: 0,\n    total: 0,\n    sliderVal: 5,\n    address: []\n  }),\n  mounted() {\n    console.log(\"avant rendu html\");\n    this.getRestaurantsFromServer(0);\n  },\n  methods: {\n    addResto() {\n      this.$firestore.restaurants.add({\n        name: this.name,\n        cuisine: this.cuisine,\n        restaurantPrice: this.restaurantPrice,\n        dateCreated: new Date(),\n      });\n      this.name = \"\";\n      this.cuisine = \"\";\n      this.restaurantPrice = 0;\n    },\n    removeResto(resto) {\n        let url = \"http://localhost:8080/api/restaurants/\" + resto._id;\n\n        fetch(url, {\n            method: \"DELETE\",\n          })\n            .then((responseJSON) => {\n              responseJSON.json().then((resJS) => {\n                console.log(resJS.msg);\n                this.msg = resJS.msg;\n                this.getRestaurantsFromServer();\n              });\n            })\n            .catch(function (err) {\n              console.log(err);\n            });\n    },\n    getRestaurantsFromServer(x) {\n      fetch(\n        \"http://localhost:8080/api/restaurants?page=\" +\n          x +\n          \"&pagesize=\" +\n          this.sliderVal +\n          \"&name=\" +\n          document.getElementById(\"searchVal\").value.toLowerCase(),\n        {\n          method: \"get\",\n        }\n      )\n        .then((responseJSON) => {\n          responseJSON.json().then((responseJS) => {\n            this.total = responseJS.count;\n            console.log(responseJS);\n            this.restaurants = responseJS.data;\n            console.log(this.restaurants);\n\n          });\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n    },\n    searchBar: _.debounce(function () {\n      this.getRestaurantsFromServer(0);\n    }, 300),\n\n    nextPage() {\n      this.counter++;\n      console.log(this.counter);\n      this.getRestaurantsFromServer(this.counter, this.sliderVal);\n    },\n    previousPage() {\n      this.counter--;\n      console.log(this.counter);\n      this.getRestaurantsFromServer(this.counter, this.sliderVal);\n    },\n    updateSliderValue() {\n      this.sliderVal = document.getElementById(\"myRange\").value;\n      this.getRestaurantsFromServer(this.counter, this.sliderVal);\n    },\n  },\n};\n\n\n\nVue.component(\"restaurant-list\", {\n  props: [\"restos\"],\n  template: `<fragment>\n                <tr v-for=\"(restaurant, index) in restos\" :key=\"index\" >  \n                <restaurant :varia=\"restaurant\"></restaurant>\n                </tr>\n                </fragment>`,\n});\n\nVue.component(\"restaurant\", {\n  template: `<fragment>\n                <td> \n                  <div class=\"tooltip\"> <a :href=\"'/RestaurantDetail?id='+{{varia._id}}\"> Ici </a>\n                    <span class=\"tooltiptext\"> \n                      building : {{varia.address.building}} <br>\n                      street : {{varia.address.street}} <br>\n                      zipcode : {{varia.address.zipcode}}\n                    </span>\n                  </div>          \n                </td>\n                <td> {{varia.name}} </td>\n                <td> {{varia.cuisine}}</td>\n                <td> {{varia.borough}} </td>\n                <!-- <td> <button class=\"w3-button w3-red\" @click=\"removeResto(varia)\">Remove</button> </td> -->\n                </fragment>`,\n  props: {\n    varia: {\n      type: Object,\n      default: () => ({}),\n    },\n  } \n\n});\n</script>\n\n<style scoped>\ndiv {\n  margin-bottom: 20px;\n}\n</style>"]}]}