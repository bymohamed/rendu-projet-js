{"remainingRequest":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/src/components/MainPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/src/components/MainPage.vue","mtime":1602601386711},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/benyamna/Bureau/M1 miage/JS/TD1 JS/expenses/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlL2Rpc3QvdnVlLmpzIjsKaW1wb3J0IEZyYWdtZW50IGZyb20gInZ1ZS1mcmFnbWVudCI7ClZ1ZS51c2UoRnJhZ21lbnQuUGx1Z2luKTsKCi8vIGltcG9ydCB7ZGF0YX0gZnJvbSAnLi4vbWFpbi5qcycKaW1wb3J0IF8gZnJvbSAibG9kYXNoIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNYWluUGFnZSIsCiAgZGF0YTogKCkgPT4gKHsKICAgIG5hbWU6ICIiLAogICAgX2lkOiAiIiwKICAgIGN1aXNpbmU6ICIiLAogICAgYm9yb3VnaCA6ICIiLAogICAgcmVzdGF1cmFudFByaWNlOiAiIiwKICAgIHJlc3RhdXJhbnRzOiBbXSwKICAgIGNvdW50ZXI6IDAsCiAgICB0b3RhbDogMCwKICAgIHNsaWRlclZhbDogNSwKICAgIGFkZHJlc3M6IFtdCiAgfSksCiAgbW91bnRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCJhdmFudCByZW5kdSBodG1sIik7CiAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigwKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZFJlc3RvKCkgewogICAgICB0aGlzLiRmaXJlc3RvcmUucmVzdGF1cmFudHMuYWRkKHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgY3Vpc2luZTogdGhpcy5jdWlzaW5lLAogICAgICAgIHJlc3RhdXJhbnRQcmljZTogdGhpcy5yZXN0YXVyYW50UHJpY2UsCiAgICAgICAgZGF0ZUNyZWF0ZWQ6IG5ldyBEYXRlKCksCiAgICAgIH0pOwogICAgICB0aGlzLm5hbWUgPSAiIjsKICAgICAgdGhpcy5jdWlzaW5lID0gIiI7CiAgICAgIHRoaXMucmVzdGF1cmFudFByaWNlID0gMDsKICAgIH0sCiAgICByZW1vdmVSZXN0byhyZXN0bykgewogICAgICAgIGxldCB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cy8iICsgcmVzdG8uX2lkOwoKICAgICAgICBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgbWV0aG9kOiAiREVMRVRFIiwKICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZUpTT04pID0+IHsKICAgICAgICAgICAgICByZXNwb25zZUpTT04uanNvbigpLnRoZW4oKHJlc0pTKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNKUy5tc2cpOwogICAgICAgICAgICAgICAgdGhpcy5tc2cgPSByZXNKUy5tc2c7CiAgICAgICAgICAgICAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0pOwogICAgfSwKICAgIGdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcih4KSB7CiAgICAgIGZldGNoKAogICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzP3BhZ2U9IiArCiAgICAgICAgICB4ICsKICAgICAgICAgICImcGFnZXNpemU9IiArCiAgICAgICAgICB0aGlzLnNsaWRlclZhbCArCiAgICAgICAgICAiJm5hbWU9IiArCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VhcmNoVmFsIikudmFsdWUudG9Mb3dlckNhc2UoKSwKICAgICAgICB7CiAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIH0KICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZUpTT04pID0+IHsKICAgICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkudGhlbigocmVzcG9uc2VKUykgPT4gewogICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2VKUy5jb3VudDsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VKUyk7CiAgICAgICAgICAgIHRoaXMucmVzdGF1cmFudHMgPSByZXNwb25zZUpTLmRhdGE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVzdGF1cmFudHMpOwoKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoQmFyOiBfLmRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoMCk7CiAgICB9LCAzMDApLAoKICAgIG5leHRQYWdlKCkgewogICAgICB0aGlzLmNvdW50ZXIrKzsKICAgICAgY29uc29sZS5sb2codGhpcy5jb3VudGVyKTsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIodGhpcy5jb3VudGVyLCB0aGlzLnNsaWRlclZhbCk7CiAgICB9LAogICAgcHJldmlvdXNQYWdlKCkgewogICAgICB0aGlzLmNvdW50ZXItLTsKICAgICAgY29uc29sZS5sb2codGhpcy5jb3VudGVyKTsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIodGhpcy5jb3VudGVyLCB0aGlzLnNsaWRlclZhbCk7CiAgICB9LAogICAgdXBkYXRlU2xpZGVyVmFsdWUoKSB7CiAgICAgIHRoaXMuc2xpZGVyVmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15UmFuZ2UiKS52YWx1ZTsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIodGhpcy5jb3VudGVyLCB0aGlzLnNsaWRlclZhbCk7CiAgICB9LAogIH0sCn07CgoKClZ1ZS5jb21wb25lbnQoInJlc3RhdXJhbnQtbGlzdCIsIHsKICBwcm9wczogWyJyZXN0b3MiXSwKICB0ZW1wbGF0ZTogYDxmcmFnbWVudD4KICAgICAgICAgICAgICAgIDx0ciB2LWZvcj0iKHJlc3RhdXJhbnQsIGluZGV4KSBpbiByZXN0b3MiIDprZXk9ImluZGV4IiA+ICAKICAgICAgICAgICAgICAgIDxyZXN0YXVyYW50IDp2YXJpYT0icmVzdGF1cmFudCI+PC9yZXN0YXVyYW50PgogICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgIDwvZnJhZ21lbnQ+YCwKfSk7CgpWdWUuY29tcG9uZW50KCJyZXN0YXVyYW50IiwgewogIHRlbXBsYXRlOiBgPGZyYWdtZW50PgogICAgICAgICAgICAgICAgPHRkPiAKICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbHRpcCI+IDxhIHYtYmluZDpocmVmPSInL1Jlc3RhdXJhbnREZXRhaWw/aWQ9JysgdmFyaWEuX2lkIj4gSWNpIDwvYT4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idG9vbHRpcHRleHQiPiAKICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nIDoge3t2YXJpYS5hZGRyZXNzLmJ1aWxkaW5nfX0gPGJyPgogICAgICAgICAgICAgICAgICAgICAgc3RyZWV0IDoge3t2YXJpYS5hZGRyZXNzLnN0cmVldH19IDxicj4KICAgICAgICAgICAgICAgICAgICAgIHppcGNvZGUgOiB7e3ZhcmlhLmFkZHJlc3MuemlwY29kZX19CiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgCiAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgPHRkPiB7e3ZhcmlhLm5hbWV9fSA8L3RkPgogICAgICAgICAgICAgICAgPHRkPiB7e3ZhcmlhLmN1aXNpbmV9fTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+IHt7dmFyaWEuYm9yb3VnaH19IDwvdGQ+CiAgICAgICAgICAgICAgICA8IS0tIDx0ZD4gPGJ1dHRvbiBjbGFzcz0idzMtYnV0dG9uIHczLXJlZCIgQGNsaWNrPSJyZW1vdmVSZXN0byh2YXJpYSkiPlJlbW92ZTwvYnV0dG9uPiA8L3RkPiAtLT4KICAgICAgICAgICAgICAgIDwvZnJhZ21lbnQ+YCwKICBwcm9wczogewogICAgdmFyaWE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiAoe30pLAogICAgfSwKICB9IAoKfSk7Cg=="},{"version":3,"sources":["MainPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"MainPage.vue","sourceRoot":"src/components","sourcesContent":["\n<template>\n  <div>\n    \n    <link rel=\"stylesheet\" href=\"https://www.w3schools.com/w3css/4/w3.css\" />\n    <link\n      rel=\"stylesheet\"\n      href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"\n    />\n\n    <!-- <div v-if=\"restaurants.length\">\n            <ol>\n                <li v-for=\"(restaurant, index) in restaurants\" :key=\"index\">\n                    {{restaurant.restaurantName}} - {{restaurant.restaurantCuisine}} - {{restaurant.restaurantPrice}}<button @click=\"removeResto(restaurant)\" style=\"background-color: red\">Remove</button>\n                </li>\n            </ol>\n\n\n        </div>\n        <div v-else>\n            <p>Hooray! No rastaurant in list sorry.</p>\n        </div>  -->\n\n    <div class=\"w3-bar w3-light-grey\">\n      <a href=\"http://localhost:8081\" class=\"w3-bar-item w3-button\">Home</a>\n      <a href=\"#\" class=\"w3-bar-item w3-button\">Login</a>\n      <a class=\"w3-bar-item \" >Nombre de restaurants : {{ total }}</a>\n      <button class=\" fa fa-search w3-bar-item w3-button w3-green w3-right \" type=\"submit\" @click=\"getRestaurantsFromServer(0)\">\n      </button>\n\n          <input\n        class=\"w3-bar-item w3-input w3-right\"\n        type=\"text\"\n        placeholder=\"Search..\"\n        name=\"searchVal\"\n        id=\"searchVal\"\n        @keydown=\"searchBar()\"\n          />\n      \n    </div>\n\n    <datalist id=\"values\">\n      <option value=\"5\"/>\n      <option value=\"10\"/>\n      <option value=\"20\"/>\n      <option value=\"50\"/>\n      <option value=\"100\"/>\n    </datalist>\n\n    <div class=\"slidecontainer w3-right w3-margin-right\">\n      <input\n        type=\"range\"\n        min=\"5\"\n        max=\"100\"\n        step=\"5\"\n        list=\"values\"\n        id=\"myRange\"\n        placeholder=\"Restaurants par page\"\n        v-on:change=\"updateSliderValue()\"\n      />\n      <p style=\"text-align:center; margin:0px ; padding: 0px;\">{{ sliderVal }}</p> \n    </div>\n\n    <div id=\"table-restos\" style=\" margin-left: 2%; margin-right:2%; margin-top: 0px; padding: 0px;\">\n    <table class=\"w3-table w3-bordered\" style=\"table-layout: fixed; width:100% ; margin: 0px\">\n      <tr class=\"w3-green\">\n        <th style=\"width:80px\"> details </th>\n        <th>Nom</th>\n        <th>Cuisine</th>\n        <th>ville</th>\n      </tr>\n      <tbody>\n        <restaurant-list :restos=\"restaurants\">\n          <!-- <slot><restaurant :varia=\"restaurant\"></restaurant></slot> -->\n        </restaurant-list>\n      </tbody>\n    </table>\n    <h3 v-if=\"restaurants.length==0\" class=\"w3-red w3-center\"> 0 restaurants trouv√©s </h3>\n\n    </div>\n    <br />\n\n    <div class=\"w3-container\" style=\"margin: auto\">\n      <div class=\"w3-quarter\">\n        <button\n          class=\"w3-button w3-left w3-red\"\n          v-on:click=\"previousPage()\"\n          value=\"precedent\"\n          :disabled=\"counter == 0\"\n        >\n          precedent\n        </button>\n      </div>\n\n      <div class=\"w3-half\">\n        <h4 class=\"w3-text w3-center\">page number {{ counter }}</h4>\n      </div>\n\n      <div class=\"w3-quarter\">\n        <button\n          class=\"w3-button w3-right w3-green\"\n          v-on:click=\"nextPage()\"\n          value=\"suivant\"\n        >\n          suivant\n        </button>\n      </div>\n    </div>\n\n    <hr />\n    <!-- <p>New restaurant:</p>\n    <form v-on:submit.prevent>\n      <div>\n        <input type=\"text\" v-model=\"name\" placeholder=\"restaurant Name\" />\n      </div>\n      <div>\n        <input type=\"text\" v-model=\"cuisine\" placeholder=\"restaurant Cuisine\" />\n      </div>\n      <div>\n        <input type=\"text\" v-model=\"restaurantPrice\" placeholder=\"Prix moyen\" />\n      </div>\n      <div>\n        <button @click=\"addResto()\">Submit</button>\n      </div>\n    </form> -->\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue/dist/vue.js\";\nimport Fragment from \"vue-fragment\";\nVue.use(Fragment.Plugin);\n\n// import {data} from '../main.js'\nimport _ from \"lodash\";\nexport default {\n  name: \"MainPage\",\n  data: () => ({\n    name: \"\",\n    _id: \"\",\n    cuisine: \"\",\n    borough : \"\",\n    restaurantPrice: \"\",\n    restaurants: [],\n    counter: 0,\n    total: 0,\n    sliderVal: 5,\n    address: []\n  }),\n  mounted() {\n    console.log(\"avant rendu html\");\n    this.getRestaurantsFromServer(0);\n  },\n  methods: {\n    addResto() {\n      this.$firestore.restaurants.add({\n        name: this.name,\n        cuisine: this.cuisine,\n        restaurantPrice: this.restaurantPrice,\n        dateCreated: new Date(),\n      });\n      this.name = \"\";\n      this.cuisine = \"\";\n      this.restaurantPrice = 0;\n    },\n    removeResto(resto) {\n        let url = \"http://localhost:8080/api/restaurants/\" + resto._id;\n\n        fetch(url, {\n            method: \"DELETE\",\n          })\n            .then((responseJSON) => {\n              responseJSON.json().then((resJS) => {\n                console.log(resJS.msg);\n                this.msg = resJS.msg;\n                this.getRestaurantsFromServer();\n              });\n            })\n            .catch(function (err) {\n              console.log(err);\n            });\n    },\n    getRestaurantsFromServer(x) {\n      fetch(\n        \"http://localhost:8080/api/restaurants?page=\" +\n          x +\n          \"&pagesize=\" +\n          this.sliderVal +\n          \"&name=\" +\n          document.getElementById(\"searchVal\").value.toLowerCase(),\n        {\n          method: \"get\",\n        }\n      )\n        .then((responseJSON) => {\n          responseJSON.json().then((responseJS) => {\n            this.total = responseJS.count;\n            console.log(responseJS);\n            this.restaurants = responseJS.data;\n            console.log(this.restaurants);\n\n          });\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n    },\n    searchBar: _.debounce(function () {\n      this.getRestaurantsFromServer(0);\n    }, 300),\n\n    nextPage() {\n      this.counter++;\n      console.log(this.counter);\n      this.getRestaurantsFromServer(this.counter, this.sliderVal);\n    },\n    previousPage() {\n      this.counter--;\n      console.log(this.counter);\n      this.getRestaurantsFromServer(this.counter, this.sliderVal);\n    },\n    updateSliderValue() {\n      this.sliderVal = document.getElementById(\"myRange\").value;\n      this.getRestaurantsFromServer(this.counter, this.sliderVal);\n    },\n  },\n};\n\n\n\nVue.component(\"restaurant-list\", {\n  props: [\"restos\"],\n  template: `<fragment>\n                <tr v-for=\"(restaurant, index) in restos\" :key=\"index\" >  \n                <restaurant :varia=\"restaurant\"></restaurant>\n                </tr>\n                </fragment>`,\n});\n\nVue.component(\"restaurant\", {\n  template: `<fragment>\n                <td> \n                  <div class=\"tooltip\"> <a v-bind:href=\"'/RestaurantDetail?id='+ varia._id\"> Ici </a>\n                    <span class=\"tooltiptext\"> \n                      building : {{varia.address.building}} <br>\n                      street : {{varia.address.street}} <br>\n                      zipcode : {{varia.address.zipcode}}\n                    </span>\n                  </div>          \n                </td>\n                <td> {{varia.name}} </td>\n                <td> {{varia.cuisine}}</td>\n                <td> {{varia.borough}} </td>\n                <!-- <td> <button class=\"w3-button w3-red\" @click=\"removeResto(varia)\">Remove</button> </td> -->\n                </fragment>`,\n  props: {\n    varia: {\n      type: Object,\n      default: () => ({}),\n    },\n  } \n\n});\n</script>\n\n<style scoped>\ndiv {\n  margin-bottom: 20px;\n}\n</style>"]}]}